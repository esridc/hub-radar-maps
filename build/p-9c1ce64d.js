import{dR as t,dS as e,dX as i,dU as s,dV as n}from"./p-3013819f.js";import{c as o,d as a,g as c}from"./p-b007e81c.js";import{c as l,d as r,u as h,I as d}from"./p-2c44d431.js";import{c as p,a as u,s as m,d as f,b,u as g,j as x}from"./p-43877d33.js";import{b as v,c as C,s as y,a as w}from"./p-77f2a655.js";import{s as I,c as k,a as z,d as E,H as D}from"./p-9b68b44d.js";import{d as T}from"./p-d3065beb.js";import{f as $}from"./p-a5ec22f2.js";import{x as H,p as S,y as P,z as M,t as O}from"./p-49ae4733.js";import{b as L,f as A,c as j,r as F,a as Z,F as B}from"./p-661d8950.js";import{g as R}from"./p-fe91e791.js";import{c as V}from"./p-f148cf8f.js";import{o as W}from"./p-14eaf8be.js";import{g as G}from"./p-483e769b.js";import{d as U,V as X}from"./p-e37240b5.js";import{c as N,d as q}from"./p-54433e06.js";import{d as Y}from"./p-39f987a6.js";import{d as K}from"./p-8ba7cdd1.js";import"./p-3b51db5e.js";
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.7.0
 */const _="CALCITE-COMBOBOX-ITEM";const J="CALCITE-COMBOBOX-ITEM-GROUP";const Q=`${_}, ${J}`;const tt={chipInvisible:"chip--invisible",selectionDisplayFit:"selection-display-fit",selectionDisplaySingle:"selection-display-single",listContainer:"list-container"};function et(t){const e=t.parentElement?.closest(Q);const i=e?.parentElement?.closest(Q);return[e,i].filter((t=>t))}function it(t){return t.ancestors?.filter((t=>t.nodeName==="CALCITE-COMBOBOX-ITEM"))||[]}function st(t){return H(t.querySelectorAll("calcite-combobox-item"))}function nt(t){const e=H(t.querySelectorAll("calcite-combobox-item"));return e.filter((t=>t.selected)).length>0}function ot(t){const e=document.evaluate("ancestor::calcite-combobox-item | ancestor::calcite-combobox-item-group",t,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);return e.snapshotLength}function at(t){return t.includes("single")}
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.7.0
 */const ct="48px";
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.7.0
 */const lt={icon:"icon",iconActive:"icon--active",iconIndent:"icon--indent",custom:"icon--custom",dot:"icon--dot",single:"label--single",label:"label",active:"label--active",selected:"label--selected",title:"title",textContainer:"text-container"};const rt='@charset "UTF-8";:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host([hidden]){display:none}[hidden]{display:none}.scale--s{font-size:var(--calcite-font-size--2);line-height:1rem;--calcite-combobox-item-spacing-unit-l:0.5rem;--calcite-combobox-item-spacing-unit-s:0.25rem;--calcite-combobox-item-spacing-indent:0.5rem;--calcite-combobox-item-selector-icon-size:1rem}.scale--m{font-size:var(--calcite-font-size--1);line-height:1rem;--calcite-combobox-item-spacing-unit-l:0.75rem;--calcite-combobox-item-spacing-unit-s:0.5rem;--calcite-combobox-item-spacing-indent:0.75rem;--calcite-combobox-item-selector-icon-size:1rem}.scale--l{font-size:var(--calcite-font-size-0);line-height:1.25rem;--calcite-combobox-item-spacing-unit-l:1rem;--calcite-combobox-item-spacing-unit-s:0.625rem;--calcite-combobox-item-spacing-indent:1rem;--calcite-combobox-item-selector-icon-size:1.5rem}.container{--calcite-combobox-item-indent-value:calc(\n    var(--calcite-combobox-item-spacing-indent) * var(--calcite-combobox-item-spacing-indent-multiplier)\n  )}:host(:focus){--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host,ul{margin:0px;display:flex;flex-direction:column;padding:0px}:host(:focus),ul:focus{outline:2px solid transparent;outline-offset:2px}.label{position:relative;box-sizing:border-box;display:flex;inline-size:100%;min-inline-size:100%;cursor:pointer;align-items:center;color:var(--calcite-color-text-3);text-decoration-line:none;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);outline-color:transparent;word-wrap:break-word;word-break:break-word;padding-block:var(--calcite-combobox-item-spacing-unit-s);padding-inline:var(--calcite-combobox-item-spacing-unit-l)}:host([disabled]) .label{cursor:default}.label--selected{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1)}.label--active{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand-hover, var(--calcite-color-brand)));outline-offset:calc(\n            -2px *\n            calc(\n              1 -\n              2 * clamp(\n                0,\n                var(--calcite-offset-invert-focus),\n                1\n              )\n            )\n          )}.label:hover,.label:active{background-color:var(--calcite-color-foreground-2);color:var(--calcite-color-text-1);text-decoration-line:none;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.title{padding-block:0;padding-inline:var(--calcite-combobox-item-spacing-unit-l)}.icon{display:inline-flex;opacity:0;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);color:var(--calcite-color-border-1)}.icon--indent{padding-inline-start:var(--calcite-combobox-item-indent-value)}.icon--custom{margin-block-start:-1px;padding-inline-start:var(--calcite-combobox-item-spacing-unit-l);color:var(--calcite-color-text-3)}.icon--active{color:var(--calcite-color-text-1)}.icon--dot{display:flex;justify-content:center;min-inline-size:var(--calcite-combobox-item-selector-icon-size)}.icon--dot:before{text-align:start;content:"•"}.label--active .icon{opacity:1}.label--selected .icon{opacity:1;color:var(--calcite-color-brand)}:host(:hover[disabled]) .icon{opacity:1}';const ht=t(class t extends e{constructor(){super();this.__registerHost();this.__attachShadow();this.calciteComboboxItemChange=i(this,"calciteComboboxItemChange",6);this.itemClickHandler=()=>{this.toggleSelected()};this.disabled=false;this.selected=false;this.active=false;this.ancestors=undefined;this.guid=R();this.icon=undefined;this.iconFlipRtl=false;this.textLabel=undefined;this.value=undefined;this.filterDisabled=undefined;this.selectionMode="multiple";this.scale="m"}selectedWatchHandler(){this.calciteComboboxItemChange.emit()}connectedCallback(){this.ancestors=et(this.el);N(this);l(this)}disconnectedCallback(){q(this);r(this)}componentDidRender(){h(this)}toggleSelected(){const t=this.selectionMode==="single-persist";if(this.disabled||t&&this.selected){return}this.selected=!this.selected}renderIcon(t){return this.icon?s("calcite-icon",{class:{[lt.custom]:!!this.icon,[lt.iconActive]:this.icon&&this.selected,[lt.iconIndent]:true},flipRtl:this.iconFlipRtl,icon:this.icon||t,key:"icon",scale:G(this.scale)}):null}renderSelectIndicator(t,e){return t?s("span",{class:{[lt.icon]:true,[lt.dot]:true,[lt.iconIndent]:true}}):s("calcite-icon",{class:{[lt.icon]:true,[lt.iconActive]:this.selected,[lt.iconIndent]:true},flipRtl:this.iconFlipRtl,icon:e,key:"indicator",scale:G(this.scale)})}renderChildren(){if(S(this.el)){return s("ul",{key:"default-slot-container"},s("slot",null))}return null}render(){const{disabled:t}=this;const e=at(this.selectionMode);const i=e&&!t;const o=e?"dot":"check";const a=t?"":o;const c={[lt.label]:true,[lt.selected]:this.selected,[lt.active]:this.active,[lt.single]:e};const l=ot(this.el);return s(n,{"aria-hidden":"true"},s(d,{disabled:t},s("div",{class:`container scale--${this.scale}`,style:{"--calcite-combobox-item-spacing-indent-multiplier":`${l}`}},s("li",{class:c,id:this.guid,onClick:this.itemClickHandler},this.renderSelectIndicator(i,a),this.renderIcon(a),s("span",{class:"title"},this.textLabel)),this.renderChildren())))}get el(){return this}static get watchers(){return{selected:["selectedWatchHandler"]}}static get style(){return rt}},[1,"calcite-combobox-item",{disabled:[516],selected:[1540],active:[516],ancestors:[1040],guid:[513],icon:[513],iconFlipRtl:[516,"icon-flip-rtl"],textLabel:[513,"text-label"],value:[8],filterDisabled:[516,"filter-disabled"],selectionMode:[513,"selection-mode"],scale:[1]},undefined,{selected:["selectedWatchHandler"]}]);function dt(){if(typeof customElements==="undefined"){return}const t=["calcite-combobox-item","calcite-icon"];t.forEach((t=>{switch(t){case"calcite-combobox-item":if(!customElements.get(t)){customElements.define(t,ht)}break;case"calcite-icon":if(!customElements.get(t)){Y()}break}}))}dt();
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.7.0
 */const pt={button:"x-button"};function ut({disabled:t,key:e,label:i,onClick:n,ref:o,scale:a}){return s("button",{"aria-label":i,class:pt.button,disabled:t,key:e,onClick:n,tabIndex:-1,type:"button",ref:o},s("calcite-icon",{icon:"x",scale:G(a)}))}const mt=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([scale=s]) .x-button{inline-size:1rem;block-size:1rem}:host([scale=m]) .x-button{inline-size:1.5rem;block-size:1.5rem}:host([scale=l]) .x-button{inline-size:2rem;block-size:2rem}.x-button{margin:0px;display:flex;cursor:pointer;appearance:none;align-content:center;align-items:center;justify-content:center;align-self:center;border-width:2px;background-color:transparent;color:var(--calcite-color-text-3);outline-color:transparent;transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-radius:50%;border-color:transparent;background-color:var(--calcite-color-foreground-2)}.x-button:active,.x-button:hover{color:var(--calcite-color-text-1);background-color:var(--calcite-color-foreground-3)}.x-button:active{border-style:solid;border-color:var(--calcite-color-brand)}.x-button calcite-icon{color:inherit}:host([scale=s]){font-size:var(--calcite-font-size--2);--calcite-combobox-item-spacing-unit-l:0.5rem;--calcite-combobox-item-spacing-unit-s:0.25rem;--calcite-combobox-input-height:1rem;--calcite-internal-combobox-input-margin-block:calc(0.25rem - 1px)}:host([scale=s]) .x-button{margin-inline:0.5rem}:host([scale=m]){font-size:var(--calcite-font-size--1);--calcite-combobox-item-spacing-unit-l:0.75rem;--calcite-combobox-item-spacing-unit-s:0.5rem;--calcite-combobox-input-height:1rem;--calcite-internal-combobox-input-margin-block:calc(0.5rem - 1px)}:host([scale=m]) .x-button{margin-inline-end:0.75rem}:host([scale=l]){font-size:var(--calcite-font-size-0);--calcite-combobox-item-spacing-unit-l:1rem;--calcite-combobox-item-spacing-unit-s:0.75rem;--calcite-combobox-input-height:1.5rem;--calcite-internal-combobox-input-margin-block:calc(0.625rem - 1px)}:host([scale=l]) .x-button{margin-inline-end:1rem}.wrapper{display:flex;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-input);background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);outline-color:transparent;padding-block:calc(var(--calcite-combobox-item-spacing-unit-s) / 4);padding-inline:var(--calcite-combobox-item-spacing-unit-l)}:host(:focus-within) .wrapper,.wrapper--active{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand-hover, var(--calcite-color-brand)));outline-offset:calc(\n            -2px *\n            calc(\n              1 -\n              2 * clamp(\n                0,\n                var(--calcite-offset-invert-focus),\n                1\n              )\n            )\n          )}:host([status=invalid]) .wrapper{border-color:var(--calcite-color-status-danger)}:host([status=invalid]:focus-within) .wrapper{outline:2px solid var(--calcite-color-status-danger);outline-offset:calc(\n            -2px *\n            calc(\n              1 -\n              2 * clamp(\n                0,\n                var(--calcite-offset-invert-focus),\n                1\n              )\n            )\n          )}.wrapper--single{padding-block:0;padding-inline:var(--calcite-combobox-item-spacing-unit-l);cursor:pointer;flex-wrap:nowrap}.grid-input{position:relative;display:flex;flex-grow:1;flex-wrap:wrap;align-items:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0px;gap:var(--calcite-combobox-item-spacing-unit-s);margin-inline-end:var(--calcite-combobox-item-spacing-unit-s)}.grid-input.selection-display-fit,.grid-input.selection-display-single{flex-wrap:nowrap;overflow:hidden}.input{flex-grow:1;appearance:none;overflow:hidden;text-overflow:ellipsis;border-style:none;background-color:transparent;padding:0px;font-family:inherit;color:var(--calcite-color-text-1);font-size:inherit;block-size:var(--calcite-combobox-input-height);line-height:var(--calcite-combobox-input-height);inline-size:100%;margin-block-end:var(--calcite-combobox-item-spacing-unit-s);min-inline-size:4.8125rem}.input:focus{outline:2px solid transparent;outline-offset:2px}.input:placeholder-shown{text-overflow:ellipsis}.input--transparent{opacity:0}.input--single{padding:0px;margin-block:var(--calcite-internal-combobox-input-margin-block)}.wrapper--active .input-single{cursor:text}.input--hidden{pointer-events:none;inline-size:0px;min-inline-size:0px;opacity:0}.input--icon{padding-block:0;padding-inline:var(--calcite-combobox-item-spacing-unit-l)}.input-wrap{display:flex;flex-grow:1;align-items:center}.input-wrap--single{flex:1 1 0%;overflow:hidden}.label{pointer-events:none;max-inline-size:100%;flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0px;font-weight:var(--calcite-font-weight-normal);block-size:var(--calcite-combobox-input-height);line-height:var(--calcite-combobox-input-height)}.label--icon{padding-inline:var(--calcite-combobox-item-spacing-unit-l)}.icon-end,.icon-start{display:flex;cursor:pointer;align-items:center}.icon-end{flex:none}.floating-ui-container{--calcite-floating-ui-z-index:var(--calcite-z-index-dropdown);display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index);visibility:hidden}.floating-ui-container .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}.floating-ui-container[data-placement^=bottom] .calcite-floating-ui-anim{transform:translateY(-5px)}.floating-ui-container[data-placement^=top] .calcite-floating-ui-anim{transform:translateY(5px)}.floating-ui-container[data-placement^=left] .calcite-floating-ui-anim{transform:translateX(5px)}.floating-ui-container[data-placement^=right] .calcite-floating-ui-anim{transform:translateX(-5px)}.floating-ui-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;transform:translate(0)}.floating-ui-container--active{visibility:visible}@media (forced-colors: active){.wrapper,.floating-ui-container--active{border:1px solid canvasText}}.screen-readers-only{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.list-container{max-block-size:45vh;overflow-y:auto;background-color:var(--calcite-color-foreground-1);inline-size:var(--calcite-dropdown-width)}.list{margin:0px;display:block;padding:0px}.list--hide{block-size:0px;overflow:hidden}calcite-chip{--calcite-animation-timing:0}.chip{margin-block:calc(var(--calcite-combobox-item-spacing-unit-s) / 4);max-inline-size:100%}.chip--active{background-color:var(--calcite-color-foreground-3)}.chip--invisible{visibility:hidden;position:absolute}.item{display:block}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:0.5rem}:host([scale=s]) .validation-container{padding-block-start:0.25rem}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}:host([hidden]){display:none}[hidden]{display:none}::slotted(calcite-combobox-item-group:not(:first-child)){padding-block-start:var(--calcite-combobox-item-spacing-unit-l)}";const ft=t=>t.tagName===J;const bt="combobox-item-";const gt="combobox-chip-";const xt="combobox-label-";const vt="combobox-listbox-";const Ct="combobox-input-";const yt=t(class t extends e{constructor(){super();this.__registerHost();this.__attachShadow();this.calciteComboboxChange=i(this,"calciteComboboxChange",6);this.calciteComboboxFilterChange=i(this,"calciteComboboxFilterChange",6);this.calciteComboboxChipClose=i(this,"calciteComboboxChipClose",6);this.calciteComboboxBeforeClose=i(this,"calciteComboboxBeforeClose",6);this.calciteComboboxClose=i(this,"calciteComboboxClose",6);this.calciteComboboxBeforeOpen=i(this,"calciteComboboxBeforeOpen",6);this.calciteComboboxOpen=i(this,"calciteComboboxOpen",6);this.placement=L;this.internalValueChangeFlag=false;this.textInput=null;this.mutationObserver=V("mutation",(()=>this.updateItems()));this.resizeObserver=V("resize",(()=>{this.setMaxScrollerHeight();this.refreshSelectionDisplay()}));this.guid=R();this.inputHeight=0;this.ignoreSelectedEventsFlag=false;this.openTransitionProp="opacity";this.setFilteredPlacements=()=>{const{el:t,flipPlacements:e}=this;this.filteredFlipPlacements=e?A(e,t):null};this.getValue=()=>{const t=this.selectedItems.map((t=>t?.value?.toString()));return t?.length?t.length>1?t:t[0]:""};this.onLabelClick=()=>{this.setFocus()};this.keyDownHandler=t=>{const{key:e}=t;switch(e){case"Tab":this.activeChipIndex=-1;this.activeItemIndex=-1;if(this.allowCustomValues&&this.text){this.addCustomChip(this.text,true);t.preventDefault()}else if(this.open){this.open=false;t.preventDefault()}else if(!this.allowCustomValues&&this.text){this.clearInputValue();this.filterItems("");this.updateActiveItemIndex(-1)}break;case"ArrowLeft":this.previousChip();t.preventDefault();break;case"ArrowRight":this.nextChip();t.preventDefault();break;case"ArrowUp":t.preventDefault();if(this.open){this.shiftActiveItemIndex(-1)}if(!this.comboboxInViewport()){this.el.scrollIntoView()}break;case"ArrowDown":t.preventDefault();if(this.open){this.shiftActiveItemIndex(1)}else{this.open=true;this.ensureRecentSelectedItemIsActive()}if(!this.comboboxInViewport()){this.el.scrollIntoView()}break;case" ":if(!this.textInput.value&&!t.defaultPrevented){if(!this.open){this.open=true;this.shiftActiveItemIndex(1)}t.preventDefault()}break;case"Home":if(!this.open){return}t.preventDefault();this.updateActiveItemIndex(0);this.scrollToActiveItem();if(!this.comboboxInViewport()){this.el.scrollIntoView()}break;case"End":if(!this.open){return}t.preventDefault();this.updateActiveItemIndex(this.filteredItems.length-1);this.scrollToActiveItem();if(!this.comboboxInViewport()){this.el.scrollIntoView()}break;case"Escape":if(!this.clearDisabled&&!this.open){this.clearValue()}this.open=false;t.preventDefault();break;case"Enter":if(this.open&&this.activeItemIndex>-1){this.toggleSelection(this.filteredItems[this.activeItemIndex]);t.preventDefault()}else if(this.activeChipIndex>-1){this.removeActiveChip();t.preventDefault()}else if(this.allowCustomValues&&this.text){this.addCustomChip(this.text,true);t.preventDefault()}else if(!t.defaultPrevented){if(I(this)){t.preventDefault()}}break;case"Delete":case"Backspace":const e=this.selectionDisplay==="single"||this.selectionDisplay==="fit"&&this.selectedHiddenChipsCount>0;if(e){return}if(this.activeChipIndex>-1){t.preventDefault();this.removeActiveChip()}else if(!this.text&&this.isMulti()){t.preventDefault();this.removeLastChip()}break}};this.toggleCloseEnd=()=>{this.open=false;this.el.removeEventListener("calciteComboboxClose",this.toggleCloseEnd)};this.toggleOpenEnd=()=>{this.open=false;this.el.removeEventListener("calciteComboboxOpen",this.toggleOpenEnd)};this.setMaxScrollerHeight=async()=>{const{listContainerEl:t,open:e,referenceEl:i}=this;if(!t||!e){return}await this.reposition(true);const s=this.getMaxScrollerHeight();t.style.maxHeight=s>0?`${s}px`:"";t.style.minWidth=`${i.clientWidth}px`;await this.reposition(true)};this.calciteChipCloseHandler=t=>{this.open=false;const e=this.items.find((e=>e===t));if(e){this.toggleSelection(e,false)}this.calciteComboboxChipClose.emit()};this.clickHandler=t=>{const e=t.composedPath();if(e.some((t=>t.tagName==="CALCITE-CHIP"))){this.open=false;t.preventDefault();return}if(e.some((t=>t.classList?.contains(pt.button)))){this.clearValue();t.preventDefault();return}this.open=!this.open;this.ensureRecentSelectedItemIsActive()};this.refreshSelectionDisplay=async()=>{await v(this);if(at(this.selectionMode)){return}if(!this.textInput){return}const{allSelectedIndicatorChipEl:t,chipContainerEl:e,selectionDisplay:i,placeholder:s,selectedIndicatorChipEl:n,textInput:o}=this;const a=parseInt(getComputedStyle(e).gap.replace("px",""));const c=P(e);const{fontSize:l,fontFamily:r}=getComputedStyle(o);const h=M(s,`${l} ${r}`);const d=(h||parseInt(ct))+a;const p=P(t);const u=P(n);const m=Math.max(p,u);this.setCompactSelectionDisplay({chipContainerElGap:a,chipContainerElWidth:c,inputWidth:d,largestSelectedIndicatorChipWidth:m});if(i==="fit"){const t=Array.from(this.el.shadowRoot.querySelectorAll("calcite-chip")).filter((t=>t.closable));const e=Math.round(c-((this.selectedHiddenChipsCount>0?u:0)+a+d+a));this.refreshChipDisplay({availableHorizontalChipElSpace:e,chipContainerElGap:a,chipEls:t});this.setVisibleAndHiddenChips(t)}};this.setFloatingEl=t=>{this.floatingEl=t;j(this,this.referenceEl,this.floatingEl)};this.setContainerEl=t=>{this.resizeObserver.observe(t);this.listContainerEl=t;this.transitionEl=t};this.setChipContainerEl=t=>{this.resizeObserver.observe(t);this.chipContainerEl=t};this.setReferenceEl=t=>{this.referenceEl=t;j(this,this.referenceEl,this.floatingEl)};this.setAllSelectedIndicatorChipEl=t=>{this.allSelectedIndicatorChipEl=t};this.setSelectedIndicatorChipEl=t=>{this.selectedIndicatorChipEl=t};this.inputHandler=t=>{const e=t.target.value;this.text=e;this.filterItems(e);if(e){this.activeChipIndex=-1}};this.filterItems=(()=>{const t=(t,e)=>t&&e.some((({label:e,value:i})=>ft(t)?e===t.label:i===t.value&&e===t.textLabel));return K((e=>{const i=$(this.data,e);const s=this.getItemsAndGroups();s.forEach((e=>{const s=!t(e,i);e.hidden=s;const[n,o]=e.ancestors;if(t(n,i)||t(o,i)){e.hidden=false}if(!s){e.ancestors.forEach((t=>t.hidden=false))}}));this.filteredItems=this.getFilteredItems();this.calciteComboboxFilterChange.emit()}),100)})();this.internalComboboxChangeEvent=()=>{this.calciteComboboxChange.emit()};this.emitComboboxChange=K(this.internalComboboxChangeEvent,0);this.getSelectedItems=()=>{if(!this.isMulti()){const t=this.items.find((({selected:t})=>t));return t?[t]:[]}return this.items.filter((t=>t.selected&&(this.selectionMode!=="ancestors"||!nt(t)))).sort(((t,e)=>{const i=this.selectedItems.indexOf(t);const s=this.selectedItems.indexOf(e);if(i>-1&&s>-1){return i-s}return s-i}))};this.updateItems=()=>{this.items=this.getItems();this.groupItems=this.getGroupItems();this.data=this.getData();this.selectedItems=this.getSelectedItems();this.filteredItems=this.getFilteredItems();this.needsIcon=this.getNeedsIcon();this.items.forEach((t=>{t.selectionMode=this.selectionMode;t.scale=this.scale}));if(!this.allowCustomValues){this.setMaxScrollerHeight()}this.groupItems.forEach(((t,e,i)=>{if(e===0){t.afterEmptyGroup=false}const s=i[e+1];if(s){s.afterEmptyGroup=t.children.length===0}}))};this.scrollToActiveItem=()=>{const t=this.filteredItems[this.activeItemIndex];if(!t){return}const e=this.calculateSingleItemHeight(t);const{offsetHeight:i,scrollTop:s}=this.listContainerEl;if(i+s<t.offsetTop+e){this.listContainerEl.scrollTop=t.offsetTop-i+e}else if(t.offsetTop<s){this.listContainerEl.scrollTop=t.offsetTop}};this.comboboxFocusHandler=()=>{if(this.disabled){return}this.textInput?.focus()};this.clearDisabled=false;this.selectionDisplay="all";this.open=false;this.disabled=false;this.form=undefined;this.label=undefined;this.placeholder=undefined;this.placeholderIcon=undefined;this.placeholderIconFlipRtl=false;this.maxItems=0;this.validationMessage=undefined;this.validationIcon=undefined;this.name=undefined;this.allowCustomValues=undefined;this.overlayPositioning="absolute";this.required=false;this.selectionMode="multiple";this.scale="m";this.status="idle";this.value=null;this.flipPlacements=undefined;this.messages=undefined;this.messageOverrides=undefined;this.selectedItems=[];this.filteredItems=[];this.items=[];this.groupItems=[];this.needsIcon=undefined;this.activeItemIndex=-1;this.activeChipIndex=-1;this.activeDescendant="";this.compactSelectionDisplay=false;this.selectedHiddenChipsCount=0;this.selectedVisibleChipsCount=0;this.text="";this.effectiveLocale=undefined;this.defaultMessages=undefined}openHandler(){W(this);if(this.disabled){this.open=false;return}this.setMaxScrollerHeight()}handleDisabledChange(t){if(!t){this.open=false}}maxItemsHandler(){this.setMaxScrollerHeight()}overlayPositioningHandler(){this.reposition(true)}handlePropsChange(){this.updateItems()}valueHandler(t){if(!this.internalValueChangeFlag){const e=this.getItems();if(Array.isArray(t)){e.forEach((e=>e.selected=t.includes(e.value)))}else if(t){e.forEach((e=>e.selected=t===e.value))}else{e.forEach((t=>t.selected=false))}this.updateItems()}}onMessagesChange(){}flipPlacementsHandler(){this.setFilteredPlacements();this.reposition(true)}selectedItemsHandler(){this.internalValueChangeFlag=true;this.value=this.getValue();this.internalValueChangeFlag=false}documentClickHandler(t){if(this.disabled){return}const e=t.composedPath();if(e.includes(this.el)||e.includes(this.referenceEl)){return}if(!this.allowCustomValues&&this.textInput.value){this.clearInputValue();this.filterItems("");this.updateActiveItemIndex(-1)}if(this.allowCustomValues&&this.text.trim().length){this.addCustomChip(this.text)}this.open=false}calciteComboboxItemChangeHandler(t){if(this.ignoreSelectedEventsFlag){return}const e=t.target;const i=this.filteredItems.indexOf(e);this.updateActiveItemIndex(i);this.toggleSelection(e,e.selected)}async reposition(t=false){const{floatingEl:e,referenceEl:i,placement:s,overlayPositioning:n,filteredFlipPlacements:o}=this;return F(this,{floatingEl:e,referenceEl:i,overlayPositioning:n,placement:s,flipPlacements:o,type:"menu"},t)}async setFocus(){await C(this);this.textInput?.focus();this.activeChipIndex=-1;this.activeItemIndex=-1}connectedCallback(){l(this);p(this);u(this);o(this);k(this);this.internalValueChangeFlag=true;this.value=this.getValue();this.internalValueChangeFlag=false;this.mutationObserver?.observe(this.el,{childList:true,subtree:true});this.updateItems();this.setFilteredPlacements();if(this.open){this.openHandler();W(this)}j(this,this.referenceEl,this.floatingEl)}async componentWillLoad(){y(this);this.updateItems();await m(this)}componentDidLoad(){z(this,this.getValue());j(this,this.referenceEl,this.floatingEl);w(this)}componentDidRender(){if(this.el.offsetHeight!==this.inputHeight){this.reposition(true);this.inputHeight=this.el.offsetHeight}h(this)}componentDidUpdate(){this.refreshSelectionDisplay()}disconnectedCallback(){this.mutationObserver?.disconnect();this.resizeObserver?.disconnect();r(this);a(this);E(this);Z(this,this.referenceEl,this.floatingEl);f(this);b(this)}textHandler(){this.updateActiveItemIndex(-1)}effectiveLocaleChange(){g(this,this.effectiveLocale)}clearValue(){this.ignoreSelectedEventsFlag=true;this.items.forEach((t=>t.selected=false));this.ignoreSelectedEventsFlag=false;this.selectedItems=[];this.emitComboboxChange();this.open=false;this.updateActiveItemIndex(-1);this.resetText();this.filterItems("");this.setFocus()}clearInputValue(){this.textInput.value="";this.text=""}comboboxInViewport(){const t=this.el.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.right<=(window.innerWidth||document.documentElement.clientWidth)&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)}onBeforeOpen(){this.scrollToActiveItem();this.calciteComboboxBeforeOpen.emit()}onOpen(){this.calciteComboboxOpen.emit()}onBeforeClose(){this.calciteComboboxBeforeClose.emit()}onClose(){this.calciteComboboxClose.emit()}ensureRecentSelectedItemIsActive(){const{selectedItems:t}=this;const e=t.length===0?0:this.items.indexOf(t[t.length-1]);this.updateActiveItemIndex(e)}hideChip(t){t.classList.add(tt.chipInvisible)}showChip(t){t.classList.remove(tt.chipInvisible)}refreshChipDisplay({chipEls:t,availableHorizontalChipElSpace:e,chipContainerElGap:i}){t.forEach((t=>{if(!t.selected){this.hideChip(t)}else{const s=P(t);if(s&&s<e){e-=s+i;this.showChip(t);return}}this.hideChip(t)}))}setCompactSelectionDisplay({chipContainerElGap:t,chipContainerElWidth:e,inputWidth:i,largestSelectedIndicatorChipWidth:s}){const n=Math.round(s+t+i);if(!this.maxCompactBreakpoint||this.maxCompactBreakpoint<n){this.maxCompactBreakpoint=n}this.compactSelectionDisplay=e<this.maxCompactBreakpoint}setVisibleAndHiddenChips(t){let e=0;t.forEach((t=>{if(t.selected&&!t.classList.contains(tt.chipInvisible)){e++}}));if(e!==this.selectedVisibleChipsCount){this.selectedVisibleChipsCount=e}const i=this.getSelectedItems().length-e;if(i!==this.selectedHiddenChipsCount){this.selectedHiddenChipsCount=i}}getMaxScrollerHeight(){const t=this.getItemsAndGroups().filter((t=>!t.hidden));const{maxItems:e}=this;let i=0;let s=0;if(t.length>e){t.forEach((t=>{if(i<e&&e>0){const e=this.calculateSingleItemHeight(t);if(e>0){s+=e;i++}}}))}return s}calculateSingleItemHeight(t){if(!t){return}let e=t.offsetHeight;const i=Array.from(t.querySelectorAll(Q));i.map((t=>t?.offsetHeight)).forEach((t=>{e-=t}));return e}getItemsAndGroups(){return[...this.groupItems,...this.items]}toggleSelection(t,e=!t.selected){if(!t||this.selectionMode==="single-persist"&&t.selected&&t.value===this.value){return}if(this.isMulti()){t.selected=e;this.updateAncestors(t);this.selectedItems=this.getSelectedItems();this.emitComboboxChange();this.resetText();this.filterItems("")}else{this.ignoreSelectedEventsFlag=true;this.items.forEach((i=>i.selected=i===t?e:false));this.ignoreSelectedEventsFlag=false;this.selectedItems=this.getSelectedItems();this.emitComboboxChange();if(this.textInput){this.textInput.value=t.textLabel}this.open=false;this.updateActiveItemIndex(-1);this.resetText();this.filterItems("")}}updateAncestors(t){if(this.selectionMode!=="ancestors"){return}const e=it(t);const i=st(t);if(t.selected){e.forEach((t=>{t.selected=true}))}else{i.forEach((t=>t.selected=false));[...e].forEach((t=>{if(!nt(t)){t.selected=false}}))}}getFilteredItems(){return this.items.filter((t=>!t.hidden))}getData(){return this.items.map((t=>({filterDisabled:t.filterDisabled,value:t.value,label:t.textLabel})))}getNeedsIcon(){return at(this.selectionMode)&&this.items.some((t=>t.icon))}resetText(){if(this.textInput){this.textInput.value=""}this.text=""}getItems(){const t=Array.from(this.el.querySelectorAll(_));return t.filter((t=>!t.disabled))}getGroupItems(){return Array.from(this.el.querySelectorAll(J))}addCustomChip(t,e){const i=this.items.find((e=>e.textLabel===t));if(i){this.toggleSelection(i,true)}else{if(!this.isMulti()){this.toggleSelection(this.selectedItems[this.selectedItems.length-1],false)}const i=document.createElement("calcite-combobox-item");i.value=t;i.textLabel=t;i.selected=true;this.el.appendChild(i);this.resetText();if(e){this.setFocus()}this.updateItems();this.filterItems("");this.emitComboboxChange()}}removeActiveChip(){this.toggleSelection(this.selectedItems[this.activeChipIndex],false);this.setFocus()}removeLastChip(){this.toggleSelection(this.selectedItems[this.selectedItems.length-1],false);this.setFocus()}previousChip(){if(this.text){return}const t=this.selectedItems.length-1;const e=this.activeChipIndex;this.activeChipIndex=e===-1?t:Math.max(e-1,0);this.updateActiveItemIndex(-1);this.focusChip()}nextChip(){if(this.text||this.activeChipIndex===-1){return}const t=this.selectedItems.length-1;const e=this.activeChipIndex+1;if(e>t){this.activeChipIndex=-1;this.setFocus()}else{this.activeChipIndex=e;this.focusChip()}this.updateActiveItemIndex(-1)}focusChip(){const t=this.selectedItems[this.activeChipIndex]?.guid;const e=t?this.referenceEl.querySelector(`#${gt}${t}`):null;e?.setFocus()}shiftActiveItemIndex(t){const{length:e}=this.filteredItems;const i=(this.activeItemIndex+e+t)%e;this.updateActiveItemIndex(i);this.scrollToActiveItem()}updateActiveItemIndex(t){this.activeItemIndex=t;let e=null;this.filteredItems.forEach(((i,s)=>{if(s===t){i.active=true;e=`${bt}${i.guid}`}else{i.active=false}}));this.activeDescendant=e;if(this.activeItemIndex>-1){this.activeChipIndex=-1}}isAllSelected(){return this.getItems().length===this.getSelectedItems().length}isMulti(){return!at(this.selectionMode)}renderChips(){const{activeChipIndex:t,scale:e,selectionMode:i,messages:n}=this;return this.selectedItems.map(((o,a)=>{const c={chip:true,"chip--active":t===a};const l=[...it(o)].reverse();const r=[...l,o].map((t=>t.textLabel));const h=i!=="ancestors"?o.textLabel:r.join(" / ");return s("calcite-chip",{class:c,closable:true,icon:o.icon,iconFlipRtl:o.iconFlipRtl,id:o.guid?`${gt}${o.guid}`:null,key:o.textLabel,messageOverrides:{dismissLabel:n.removeTag},onCalciteChipClose:()=>this.calciteChipCloseHandler(o),scale:e,selected:o.selected,title:h,value:o.value},h)}))}renderAllSelectedIndicatorChip(){const{compactSelectionDisplay:t,scale:e,selectedVisibleChipsCount:i,setAllSelectedIndicatorChipEl:n}=this;const o=this.messages.allSelected;return s("calcite-chip",{class:{chip:true,[tt.chipInvisible]:!(this.isAllSelected()&&!i&&!t)},scale:e,title:o,value:"",ref:n},o)}renderAllSelectedIndicatorChipCompact(){const{compactSelectionDisplay:t,scale:e,selectedVisibleChipsCount:i}=this;const n=this.messages.all||"All";return s("calcite-chip",{class:{chip:true,[tt.chipInvisible]:!(this.isAllSelected()&&!i&&t)},scale:e,title:n,value:""},n)}renderSelectedIndicatorChip(){const{compactSelectionDisplay:t,selectionDisplay:e,getSelectedItems:i,scale:n,selectedHiddenChipsCount:o,selectedVisibleChipsCount:a,setSelectedIndicatorChipEl:c}=this;let l;let r;if(t){l=true}else{if(e==="single"){const t=i().length;if(this.isAllSelected()){l=true}else if(t>0){l=false}else{l=true}r=`${t} ${this.messages.selected}`}else if(e==="fit"){l=!!(this.isAllSelected()&&a===0||o===0);r=a>0?`+${o}`:`${o} ${this.messages.selected}`}}return s("calcite-chip",{class:{chip:true,[tt.chipInvisible]:l},scale:n,title:r,value:"",ref:c},r)}renderSelectedIndicatorChipCompact(){const{compactSelectionDisplay:t,selectionDisplay:e,getSelectedItems:i,scale:n,selectedHiddenChipsCount:o}=this;let a;let c;if(t){const t=i().length;if(this.isAllSelected()){a=true}else if(e==="fit"){a=!(o>0);c=`${o||0}`}else if(e==="single"){a=!(t>0);c=`${t}`}}else{a=true}return s("calcite-chip",{class:{chip:true,[tt.chipInvisible]:a},scale:n,title:c,value:""},c)}get showingInlineIcon(){const{placeholderIcon:t,selectionMode:e,selectedItems:i,open:s}=this;const n=i[0];const o=n?.icon;const a=at(e);return!s&&n?!!o&&a:!!t&&(!n||a)}renderInput(){const{guid:t,disabled:e,placeholder:i,selectionMode:n,selectedItems:o,open:a}=this;const l=at(n);const r=o[0];const h=!a&&l&&!!r;return s("span",{class:{"input-wrap":true,"input-wrap--single":l}},h&&s("span",{class:{label:true,"label--icon":!!r?.icon},key:"label"},r.textLabel),s("input",{"aria-activedescendant":this.activeDescendant,"aria-autocomplete":"list","aria-controls":`${vt}${t}`,"aria-label":c(this),class:{input:true,"input--single":true,"input--transparent":this.activeChipIndex>-1,"input--hidden":h,"input--icon":this.showingInlineIcon&&!!this.placeholderIcon},disabled:e,id:`${Ct}${t}`,key:"input",onFocus:this.comboboxFocusHandler,onInput:this.inputHandler,placeholder:i,type:"text",ref:t=>this.textInput=t}))}renderListBoxOptions(){return this.filteredItems.map((t=>s("li",{"aria-selected":O(t.selected),id:t.guid?`${bt}${t.guid}`:null,role:"option",tabindex:"-1"},t.textLabel)))}renderFloatingUIContainer(){const{setFloatingEl:t,setContainerEl:e,open:i}=this;const n={[tt.listContainer]:true,[B.animation]:true,[B.animationActive]:i};return s("div",{"aria-hidden":"true",class:{"floating-ui-container":true,"floating-ui-container--active":i},ref:t},s("div",{class:n,ref:e},s("ul",{class:{list:true,"list--hide":!i}},s("slot",null))))}renderSelectedOrPlaceholderIcon(){const{selectedItems:t,placeholderIcon:e,placeholderIconFlipRtl:i}=this;const n=t[0];const o=n?.icon;return this.showingInlineIcon&&s("span",{class:"icon-start",key:"selected-placeholder-icon"},s("calcite-icon",{class:"selected-icon",flipRtl:this.open&&n?n.iconFlipRtl:i,icon:!this.open&&n?o:e,scale:G(this.scale)}))}renderChevronIcon(){const{open:t}=this;return s("span",{class:"icon-end",key:"chevron"},s("calcite-icon",{icon:t?"chevron-up":"chevron-down",scale:G(this.scale)}))}render(){const{selectionDisplay:t,guid:e,label:i,open:o}=this;const a=at(this.selectionMode);const l=t==="all";const r=t==="single";const h=!a&&t==="fit";const p=!this.clearDisabled&&this.value?.length>0;return s(n,{onClick:this.comboboxFocusHandler},s(d,{disabled:this.disabled},s("div",{"aria-autocomplete":"list","aria-controls":`${vt}${e}`,"aria-expanded":O(o),"aria-haspopup":"listbox","aria-label":c(this),"aria-live":"polite","aria-owns":`${vt}${e}`,class:{wrapper:true,"wrapper--single":a||!this.selectedItems.length,"wrapper--active":o},onClick:this.clickHandler,onKeyDown:this.keyDownHandler,role:"combobox",ref:this.setReferenceEl},this.renderSelectedOrPlaceholderIcon(),s("div",{class:{"grid-input":true,[tt.selectionDisplayFit]:h,[tt.selectionDisplaySingle]:r},key:"grid",ref:this.setChipContainerEl},!a&&!r&&this.renderChips(),!a&&!l&&[this.renderSelectedIndicatorChip(),this.renderSelectedIndicatorChipCompact(),this.renderAllSelectedIndicatorChip(),this.renderAllSelectedIndicatorChipCompact()],s("label",{class:"screen-readers-only",htmlFor:`${Ct}${e}`,id:`${xt}${e}`},i),this.renderInput()),p?s(ut,{disabled:this.disabled,key:"close-button",label:this.messages.clear,scale:this.scale}):null,this.renderChevronIcon()),s("ul",{"aria-labelledby":`${xt}${e}`,"aria-multiselectable":"true",class:"screen-readers-only",id:`${vt}${e}`,role:"listbox",tabIndex:-1},this.renderListBoxOptions()),this.renderFloatingUIContainer(),s(D,{component:this}),this.validationMessage&&this.status==="invalid"?s(X,{icon:this.validationIcon,message:this.validationMessage,scale:this.scale,status:this.status}):null))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{open:["openHandler"],disabled:["handleDisabledChange"],maxItems:["maxItemsHandler"],overlayPositioning:["overlayPositioningHandler"],selectionMode:["handlePropsChange"],scale:["handlePropsChange"],value:["valueHandler"],messageOverrides:["onMessagesChange"],flipPlacements:["flipPlacementsHandler"],selectedItems:["selectedItemsHandler"],text:["textHandler"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return mt}},[1,"calcite-combobox",{clearDisabled:[516,"clear-disabled"],selectionDisplay:[513,"selection-display"],open:[1540],disabled:[516],form:[513],label:[1],placeholder:[1],placeholderIcon:[513,"placeholder-icon"],placeholderIconFlipRtl:[516,"placeholder-icon-flip-rtl"],maxItems:[514,"max-items"],validationMessage:[1,"validation-message"],validationIcon:[520,"validation-icon"],name:[513],allowCustomValues:[516,"allow-custom-values"],overlayPositioning:[513,"overlay-positioning"],required:[516],selectionMode:[513,"selection-mode"],scale:[513],status:[513],value:[1025],flipPlacements:[16],messages:[1040],messageOverrides:[1040],selectedItems:[1040],filteredItems:[1040],items:[32],groupItems:[32],needsIcon:[32],activeItemIndex:[32],activeChipIndex:[32],activeDescendant:[32],compactSelectionDisplay:[32],selectedHiddenChipsCount:[32],selectedVisibleChipsCount:[32],text:[32],effectiveLocale:[32],defaultMessages:[32],reposition:[64],setFocus:[64]},[[4,"click","documentClickHandler"],[0,"calciteComboboxItemChange","calciteComboboxItemChangeHandler"]],{open:["openHandler"],disabled:["handleDisabledChange"],maxItems:["maxItemsHandler"],overlayPositioning:["overlayPositioningHandler"],selectionMode:["handlePropsChange"],scale:["handlePropsChange"],value:["valueHandler"],messageOverrides:["onMessagesChange"],flipPlacements:["flipPlacementsHandler"],selectedItems:["selectedItemsHandler"],text:["textHandler"],effectiveLocale:["effectiveLocaleChange"]}]);function wt(){if(typeof customElements==="undefined"){return}const t=["calcite-combobox","calcite-chip","calcite-combobox-item","calcite-icon","calcite-input-message"];t.forEach((t=>{switch(t){case"calcite-combobox":if(!customElements.get(t)){customElements.define(t,yt)}break;case"calcite-chip":if(!customElements.get(t)){T()}break;case"calcite-combobox-item":if(!customElements.get(t)){dt()}break;case"calcite-icon":if(!customElements.get(t)){Y()}break;case"calcite-input-message":if(!customElements.get(t)){U()}break}}))}wt();
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.7.0
 */const It=60;const kt=["CET","CST6CDT","EET","EST","EST5EDT","Factory","HST","MET","MST","MST7MDT","PST8PDT","UTC","WET"];function zt(t){const e="−";const i="-";return t.replace(":15",".25").replace(":30",".5").replace(":45",".75").replace(e,i)}function Et(t,e){const i=Mt(t,"en-US",e).replace("GMT","");if(i===""){return 0}return Number(zt(i))*It}function Dt(){const t=new Date;return t.getTimezoneOffset()*-1}function Tt(){const t=new Intl.DateTimeFormat;return t.resolvedOptions().timeZone}let $t;async function Ht(t,e,i,s){const n=s.getTime();const o=Intl.supportedValuesOf("timeZone");if(i==="offset"){if(!$t){$t=Promise.all([import("./p-71a289a9.js"),import("./p-d4070271.js")])}return $t.then((async([{groupTimeZones:i},{DateEngine:s}])=>{const o=await i({dateEngine:new s,groupDateRange:1,startDate:new Date(n).toISOString()});const a=new Intl.ListFormat(t,{style:"long",type:"conjunction"});o.forEach((t=>{const e=[];let i=0;t.tzs.forEach(((t,s)=>{if(kt.includes(t)){i++}e[s]=i}));t.tzs=t.tzs.filter((t=>!kt.includes(t)));t.labelTzIndices=t.labelTzIndices.map((t=>t-e[t])).filter((e=>e>=0&&e<t.tzs.length))}));return o.map((({labelTzIndices:i,tzs:s})=>{const o=s[0];const c=zt(Mt(o,t,n));const l=Et(o,n);const r=i.map((t=>{const i=s[t];const n=e[i];return n||i.split("/").pop()}));const h=Pt(e,c,a.format(r));return{label:h,value:l,filterValue:s.map((t=>St(t)))}})).filter((t=>!!t)).sort(((t,e)=>t.value-e.value))}))}return o.map((t=>{const e=St(t);const i=t;return{label:e,value:i,filterValue:t}})).filter((t=>!!t)).sort()}function St(t){return t.replace(/_/g," ")}function Pt(t,e,i){return t.timeZoneLabel.replace("{offset}",e).replace("{cities}",i)}function Mt(t,e,i=Date.now()){const s=x(e,{timeZone:t,timeZoneName:"shortOffset"});const n=s.formatToParts(i);return n.find((({type:t})=>t==="timeZoneName")).value}const Ot=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}";const Lt=t(class t extends e{constructor(){super();this.__registerHost();this.__attachShadow();this.calciteInputTimeZoneBeforeClose=i(this,"calciteInputTimeZoneBeforeClose",6);this.calciteInputTimeZoneBeforeOpen=i(this,"calciteInputTimeZoneBeforeOpen",6);this.calciteInputTimeZoneChange=i(this,"calciteInputTimeZoneChange",6);this.calciteInputTimeZoneClose=i(this,"calciteInputTimeZoneClose",6);this.calciteInputTimeZoneOpen=i(this,"calciteInputTimeZoneOpen",6);this.setComboboxRef=t=>{this.comboboxEl=t};this.onComboboxBeforeClose=t=>{t.stopPropagation();this.calciteInputTimeZoneBeforeClose.emit()};this.onComboboxBeforeOpen=t=>{t.stopPropagation();this.calciteInputTimeZoneBeforeOpen.emit()};this.onComboboxChange=t=>{t.stopPropagation();const e=t.target;const i=this.findTimeZoneItem(e.selectedItems[0].getAttribute("data-value"));const s=`${i.value}`;if(this.value===s){return}this.value=s;this.selectedTimeZoneItem=i;this.calciteInputTimeZoneChange.emit()};this.onComboboxClose=t=>{t.stopPropagation();this.open=false;this.calciteInputTimeZoneClose.emit()};this.onComboboxOpen=t=>{this.open=true;t.stopPropagation();this.calciteInputTimeZoneOpen.emit()};this.disabled=false;this.form=undefined;this.maxItems=0;this.messages=undefined;this.messageOverrides=undefined;this.mode="offset";this.validationMessage=undefined;this.validationIcon=undefined;this.name=undefined;this.open=false;this.overlayPositioning="absolute";this.referenceDate=undefined;this.required=false;this.scale="m";this.status="idle";this.value=undefined;this.defaultMessages=undefined;this.effectiveLocale=""}onMessagesChange(){}handleTimeZoneItemPropsChange(){this.updateTimeZoneItemsAndSelection()}handleValueChange(t,e){const i=this.findTimeZoneItem(t);if(!i){this.value=e;return}this.selectedTimeZoneItem=i}async setFocus(){await C(this);await this.comboboxEl.setFocus()}effectiveLocaleWatcher(){g(this,this.effectiveLocale)}onLabelClick(){this.setFocus()}findTimeZoneItem(t){const e=t;return this.timeZoneItems.find((({value:t})=>t==e))}async updateTimeZoneItemsAndSelection(){this.timeZoneItems=await this.createTimeZoneItems();const t=this.mode==="offset"?Dt():Tt();const e=this.value??t;this.selectedTimeZoneItem=this.findTimeZoneItem(e);if(!this.selectedTimeZoneItem){this.selectedTimeZoneItem=this.findTimeZoneItem(t)}}async createTimeZoneItems(){if(!this.effectiveLocale||!this.messages){return[]}return Ht(this.effectiveLocale,this.messages,this.mode,this.referenceDate instanceof Date?this.referenceDate:new Date(this.referenceDate??Date.now()))}connectedCallback(){k(this);o(this);p(this);u(this)}disconnectedCallback(){E(this);a(this);f(this);b(this)}async componentWillLoad(){y(this);await m(this);await this.updateTimeZoneItemsAndSelection();const t=`${this.selectedTimeZoneItem.value}`;z(this,t);this.value=t}componentDidLoad(){w(this)}componentDidRender(){h(this)}render(){return s(n,null,s(d,{disabled:this.disabled},s("calcite-combobox",{clearDisabled:true,disabled:this.disabled,label:this.messages.chooseTimeZone,lang:this.effectiveLocale,maxItems:this.maxItems,onCalciteComboboxBeforeClose:this.onComboboxBeforeClose,onCalciteComboboxBeforeOpen:this.onComboboxBeforeOpen,onCalciteComboboxChange:this.onComboboxChange,onCalciteComboboxClose:this.onComboboxClose,onCalciteComboboxOpen:this.onComboboxOpen,open:this.open,overlayPositioning:this.overlayPositioning,scale:this.scale,selectionMode:"single-persist",status:this.status,"validation-icon":this.validationIcon,"validation-message":this.validationMessage,ref:this.setComboboxRef},this.timeZoneItems.map((t=>{const e=this.selectedTimeZoneItem===t;const{label:i,value:n}=t;return s("calcite-combobox-item",{"data-value":n,key:i,selected:e,textLabel:i,value:`${t.filterValue}`})}))),s(D,{component:this})))}static get delegatesFocus(){return true}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],messages:["handleTimeZoneItemPropsChange"],mode:["handleTimeZoneItemPropsChange"],referenceDate:["handleTimeZoneItemPropsChange"],value:["handleValueChange"],effectiveLocale:["effectiveLocaleWatcher"]}}static get style(){return Ot}},[17,"calcite-input-time-zone",{disabled:[516],form:[513],maxItems:[514,"max-items"],messages:[1040],messageOverrides:[1040],mode:[513],validationMessage:[1,"validation-message"],validationIcon:[520,"validation-icon"],name:[513],open:[1540],overlayPositioning:[513,"overlay-positioning"],referenceDate:[1,"reference-date"],required:[516],scale:[513],status:[513],value:[1025],defaultMessages:[32],effectiveLocale:[32],setFocus:[64]},undefined,{messageOverrides:["onMessagesChange"],messages:["handleTimeZoneItemPropsChange"],mode:["handleTimeZoneItemPropsChange"],referenceDate:["handleTimeZoneItemPropsChange"],value:["handleValueChange"],effectiveLocale:["effectiveLocaleWatcher"]}]);function At(){if(typeof customElements==="undefined"){return}const t=["calcite-input-time-zone","calcite-chip","calcite-combobox","calcite-combobox-item","calcite-icon","calcite-input-message"];t.forEach((t=>{switch(t){case"calcite-input-time-zone":if(!customElements.get(t)){customElements.define(t,Lt)}break;case"calcite-chip":if(!customElements.get(t)){T()}break;case"calcite-combobox":if(!customElements.get(t)){wt()}break;case"calcite-combobox-item":if(!customElements.get(t)){dt()}break;case"calcite-icon":if(!customElements.get(t)){Y()}break;case"calcite-input-message":if(!customElements.get(t)){U()}break}}))}At();const jt=Lt;const Ft=At;export{jt as CalciteInputTimeZone,Ft as defineCustomElement};
//# sourceMappingURL=p-9c1ce64d.js.map