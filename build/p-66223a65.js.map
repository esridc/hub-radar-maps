{"version":3,"names":["u","c","l","p","o","GROUP_LAYER_MAP","m","e","isValid","type","errorMessage","y","a","f","r","t","initiator","v","layerJSON","Promise","resolve","Object","keys","length","async","d","title","s","METADATA","n","I","layer","itemType","validateLayer","validateItem","createJSONContext","createItemData","errorNamePrefix","saveResources","sourceIsPortalItem","removeAllResources","catch","i","resourceReferences","g","newItem","setItemProperties"],"sources":["./node_modules/@arcgis/core/layers/save/groupLayerUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{save as e,saveAs as r}from\"./utils.js\";import{createForItemWrite as t}from\"../../portal/support/jsonContext.js\";import{typeKeyword as o,hasTypeKeyword as a,removeTypeKeyword as s,addTypeKeyword as n}from\"../../portal/support/portalItemUtils.js\";import{saveResources as i}from\"../../webdoc/support/resourceUtils.js\";const u=\"Group Layer\",c=\"group-layer-save\",l=\"group-layer-save-as\",p=o.GROUP_LAYER_MAP;function m(e){return{isValid:\"group\"===e.type,errorMessage:\"Layer.type should be 'group'\"}}function y(e){return{isValid:a(e,p),errorMessage:`Layer.portalItem.typeKeywords should have '${p}'`}}function f(e,r){return{...t(e,\"web-map\",!0),initiator:r}}function v(e){const r=e.layerJSON;return Promise.resolve(r&&Object.keys(r).length?r:null)}async function d(e,r){r.title||=e.title,s(r,o.METADATA),n(r,p)}async function I(r,t){return e({layer:r,itemType:u,validateLayer:m,validateItem:y,createJSONContext:e=>f(e,r),createItemData:v,errorNamePrefix:c,saveResources:async(e,t)=>(r.sourceIsPortalItem||await e.removeAllResources().catch((()=>{})),i(r.resourceReferences,t))},t)}async function g(e,t,o){return r({layer:e,itemType:u,validateLayer:m,createJSONContext:r=>f(r,e),createItemData:v,errorNamePrefix:l,newItem:t,setItemProperties:d,saveResources:(r,t)=>i(e.resourceReferences,t)},o)}export{I as save,g as saveAs};\n"],"mappings":"+RAIkU,MAAMA,EAAE,cAAcC,EAAE,mBAAmBC,EAAE,sBAAsBC,EAAEC,EAAEC,gBAAgB,SAASC,EAAEC,GAAG,MAAM,CAACC,QAAQ,UAAUD,EAAEE,KAAKC,aAAa,+BAA+B,CAAC,SAASC,EAAEJ,GAAG,MAAM,CAACC,QAAQI,EAAEL,EAAEJ,GAAGO,aAAa,8CAA8CP,KAAK,CAAC,SAASU,EAAEN,EAAEO,GAAG,MAAM,IAAIC,EAAER,EAAE,WAAW,GAAGS,UAAUF,EAAE,CAAC,SAASG,EAAEV,GAAG,MAAMO,EAAEP,EAAEW,UAAU,OAAOC,QAAQC,QAAQN,GAAGO,OAAOC,KAAKR,GAAGS,OAAOT,EAAE,KAAK,CAACU,eAAeC,EAAElB,EAAEO,GAAGA,EAAEY,QAAQnB,EAAEmB,MAAMC,EAAEb,EAAEV,EAAEwB,UAAUC,EAAEf,EAAEX,EAAE,CAACqB,eAAeM,EAAEhB,EAAEC,GAAG,OAAOR,EAAE,CAACwB,MAAMjB,EAAEkB,SAAShC,EAAEiC,cAAc3B,EAAE4B,aAAavB,EAAEwB,kBAAkB5B,GAAGM,EAAEN,EAAEO,GAAGsB,eAAenB,EAAEoB,gBAAgBpC,EAAEqC,cAAcd,MAAMjB,EAAEQ,KAAKD,EAAEyB,0BAA0BhC,EAAEiC,qBAAqBC,OAAK,KAAQ,IAAGC,EAAE5B,EAAE6B,mBAAmB5B,KAAKA,EAAE,CAACS,eAAeoB,EAAErC,EAAEQ,EAAEX,GAAG,OAAOU,EAAE,CAACiB,MAAMxB,EAAEyB,SAAShC,EAAEiC,cAAc3B,EAAE6B,kBAAkBrB,GAAGD,EAAEC,EAAEP,GAAG6B,eAAenB,EAAEoB,gBAAgBnC,EAAE2C,QAAQ9B,EAAE+B,kBAAkBrB,EAAEa,cAAc,CAACxB,EAAEC,IAAI2B,EAAEnC,EAAEoC,mBAAmB5B,IAAIX,EAAE,Q"}