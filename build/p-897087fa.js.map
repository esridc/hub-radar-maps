{"version":3,"names":["async","r","e","o","allLayers","beforeSave","push","Promise","allSettled","Set","t","n","s","messages","filter","type","map","name","message","details","blockedRelativeUrls","concat","ignoreUnsupported","supplementalUnsupportedErrors","requiredPropertyChecksDisabled","has","includes","length","errorName","errors"],"sources":["./node_modules/@arcgis/core/webdoc/support/saveUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";async function r(e){const r=[];for(const o of e.allLayers)if(\"beforeSave\"in o&&\"function\"==typeof o.beforeSave){const e=o.beforeSave();e&&r.push(e)}await Promise.allSettled(r)}const o=new Set([\"layer:unsupported\",\"property:unsupported\",\"symbol:unsupported\",\"symbol-layer:unsupported\",\"url:unsupported\"]);function t(r,t,n){let s=(r.messages??[]).filter((({type:e})=>\"error\"===e)).map((({name:r,message:o,details:t})=>new e(r,o,t)));if(r.blockedRelativeUrls&&(s=s.concat(r.blockedRelativeUrls.map((r=>new e(\"url:unsupported\",`Relative url '${r}' is not supported`))))),n){const{ignoreUnsupported:e,supplementalUnsupportedErrors:r=[],requiredPropertyChecksDisabled:t}=n;e&&(s=s.filter((({name:e})=>!(o.has(e)||r.includes(e))))),t&&(s=s.filter((e=>\"web-document-write:property-required\"!==e.name)))}if(s.length>0)throw new e(t.errorName,\"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:s})}export{r as beforeSave,t as evaluateWriteErrors};\n"],"mappings":"oCAImCA,eAAeC,EAAEC,GAAG,MAAMD,EAAE,GAAG,IAAI,MAAME,KAAKD,EAAEE,UAAU,GAAG,eAAeD,GAAG,mBAAmBA,EAAEE,WAAW,CAAC,MAAMH,EAAEC,EAAEE,aAAaH,GAAGD,EAAEK,KAAKJ,EAAE,OAAOK,QAAQC,WAAWP,EAAE,CAAC,MAAME,EAAE,IAAIM,IAAI,CAAC,oBAAoB,uBAAuB,qBAAqB,2BAA2B,oBAAoB,SAASC,EAAET,EAAES,EAAEC,GAAG,IAAIC,GAAGX,EAAEY,UAAU,IAAIC,QAAM,EAAIC,KAAKb,KAAK,UAAUA,IAAIc,KAAG,EAAIC,KAAKhB,EAAEiB,QAAQf,EAAEgB,QAAQT,KAAK,IAAIR,EAAED,EAAEE,EAAEO,KAAK,GAAGT,EAAEmB,sBAAsBR,EAAEA,EAAES,OAAOpB,EAAEmB,oBAAoBJ,KAAKf,GAAG,IAAIC,EAAE,kBAAkB,iBAAiBD,2BAA2BU,EAAE,CAAC,MAAMW,kBAAkBpB,EAAEqB,8BAA8BtB,EAAE,GAAGuB,+BAA+Bd,GAAGC,EAAET,IAAIU,EAAEA,EAAEE,QAAM,EAAIG,KAAKf,OAAOC,EAAEsB,IAAIvB,IAAID,EAAEyB,SAASxB,OAAOQ,IAAIE,EAAEA,EAAEE,QAAQZ,GAAG,yCAAyCA,EAAEe,OAAO,CAAC,GAAGL,EAAEe,OAAO,EAAE,MAAM,IAAIzB,EAAEQ,EAAEkB,UAAU,2GAA2G,CAACC,OAAOjB,GAAG,Q"}